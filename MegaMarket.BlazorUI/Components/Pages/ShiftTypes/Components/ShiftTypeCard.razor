@* Shift Type Card Component *@

<div class="card border-0 shadow-sm h-100 shift-card">
    <div class="card-header bg-@GetShiftColor() text-white">
        <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">@ShiftType.Name</h5>
            <span class="badge bg-white text-@GetShiftColor() fw-bold">@GetShiftIcon()</span>
        </div>
    </div>
    <div class="card-body">
        <div class="mb-3">
            <div class="d-flex align-items-center mb-2">
                <span class="bi bi-clock me-2 text-muted"></span>
                <strong>Shift Hours</strong>
            </div>
            <div class="ps-4">
                <span class="badge bg-light text-dark">
                    @FormatTime(ShiftType.StartTime) - @FormatTime(ShiftType.EndTime)
                </span>
            </div>
        </div>

        <div class="mb-3">
            <div class="d-flex align-items-center mb-2">
                <span class="bi bi-cash-coin me-2 text-muted"></span>
                <strong>Wage Rate</strong>
            </div>
            <div class="ps-4">
                <h4 class="text-@GetShiftColor() mb-0">$@ShiftType.WagePerHour.ToString("F2")<small class="text-muted fs-6">/hour</small></h4>
            </div>
        </div>

        <div class="mb-3">
            <div class="d-flex align-items-center mb-2">
                <span class="bi bi-hourglass-split me-2 text-muted"></span>
                <strong>Duration</strong>
            </div>
            <div class="ps-4">
                <span class="text-muted">@GetDuration() hours</span>
            </div>
        </div>

        @* Actions *@
        <div class="d-flex gap-2 mt-3">
            <button class="btn btn-sm btn-outline-primary flex-fill" @onclick="OnEdit">
                <span class="bi bi-pencil me-1"></span> Edit
            </button>
            <button class="btn btn-sm btn-outline-danger" @onclick="OnDelete">
                <span class="bi bi-trash"></span>
            </button>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public MegaMarket.Data.Models.ShiftType ShiftType { get; set; } = null!;

    [Parameter]
    public EventCallback OnEdit { get; set; }

    [Parameter]
    public EventCallback OnDelete { get; set; }

    private string GetShiftColor()
    {
        var startHour = ShiftType.StartTime.Hours;
        return startHour switch
        {
            >= 6 and < 12 => "primary",      // Morning (Blue)
            >= 12 and < 18 => "warning",     // Afternoon (Orange/Yellow)
            _ => "secondary"                 // Night (Gray)
        };
    }

    private string GetShiftIcon()
    {
        var startHour = ShiftType.StartTime.Hours;
        return startHour switch
        {
            >= 6 and < 12 => "ðŸŒ…",    // Morning
            >= 12 and < 18 => "â˜€ï¸",   // Afternoon
            >= 18 and < 22 => "ðŸŒ†",   // Evening
            _ => "ðŸŒ™"                 // Night
        };
    }

    private string FormatTime(TimeSpan time)
    {
        return DateTime.Today.Add(time).ToString("h:mm tt");
    }

    private double GetDuration()
    {
        var duration = ShiftType.EndTime - ShiftType.StartTime;
        if (duration.TotalHours < 0)
        {
            // Handle overnight shifts
            duration = duration.Add(TimeSpan.FromHours(24));
        }
        return Math.Round(duration.TotalHours, 1);
    }
}
